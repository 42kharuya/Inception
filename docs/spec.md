Inception プロジェクト ブリーフィング・ドキュメント：システム管理と Docker 仮想化

エグゼクティブ・サマリー

本ドキュメントは、システム管理の知識を深めることを目的とした実習プロジェクト「Inception」の要件とガイドラインをまとめたものである。本プロジェクトの核心は、Dockerを用いて複数のサービスが連携する小規模なインフラストラクチャを構築することにある。

主要な構成要素は、NGINX（TLS対応）、WordPress（php-fpm）、および MariaDB の 3 つのコンテナである。これらを専用の仮想ネットワークと永続的なボリュームで接続し、セキュアかつ効率的な環境を構築することが求められる。また、本プロジェクトではセキュリティ、ベストプラクティス（PID 1の遵守など）、およびAIツールの倫理的な活用が強く重視されており、完成したシステムだけでなく、その構築プロセスと設計の理解が評価の対象となる。


--------------------------------------------------------------------------------


1. プロジェクトの目的と一般的指針

本プロジェクトは、Dockerを活用した仮想化技術を通じて、システム管理に関する広範な知識を習得することを目的としている。

* 仮想化の実施: すべてのDockerイメージは、新しく作成された個人用仮想マシン（VM）内で仮想化される必要がある。
* ディレクトリ構造とビルド:
  * すべての設定ファイルは srcs フォルダ内に配置しなければならない。
  * ルートディレクトリに Makefile を配置し、docker-compose.yml を使用してアプリケーション全体をセットアップ（イメージのビルドを含む）できるようにする必要がある。
* 自律的な学習: Dockerの利用方法や関連概念について、公式ドキュメント等を広く参照し、未習得の概念を自ら補完することが推奨されている。


--------------------------------------------------------------------------------


2. AIツールの利用に関する指針

学習プロセスにおいてAIを補助的に利用することは認められているが、以下の原則に従わなければならない。

* 活用方針: 繰り返しの多いタスクや退屈な作業の削減にAIを活用し、将来のキャリアに役立つプロンプティング・スキルの向上を図ること。
* 重要ルール:
  * AIが生成したコンテンツは、完全に理解し、責任を持てる場合のみ使用すること。
  * AIの結果を批判的に評価し、体系的なチェック、レビュー、テストを行う習慣をつけること。
  * AIの回答は一般的になりがちであるため、環境を共有するピア（仲間）との対話やレビューを優先し、理解のギャップを埋めること。
* 評価への影響: 評価時にコードの内容（例：パイプの処理方法など）を説明できない場合、信頼を失い、プロジェクトは不合格となる。


--------------------------------------------------------------------------------


3. 必須要件：インフラストラクチャの構成

特定のルールに基づき、以下のサービスを個別のコンテナとして構築する必要がある。

3.1 サービス構成

サービス	要件詳細
NGINX	TLSv1.2 または TLSv1.3 のみを許可する。インフラの唯一のエントリポイント（ポート443）となる。
WordPress + php-fpm	php-fpm がインストール・設定されていること。NGINXは含めない。
MariaDB	データベース専用。NGINXは含めない。

3.2 イメージとコンテナの構築

* ベースOS: パフォーマンス上の理由から、Alpine または Debian の「最後から2番目の安定版（penultimate stable version）」を使用する。
* 自作イメージ: 各サービスに対して独自の Dockerfile を作成しなければならない。DockerHub 等からの既製イメージのプルは禁止されている（ベースOSを除く）。
* 命名規則: 各Dockerイメージは、対応するサービスと同じ名前に設定する。
* 再起動: コンテナがクラッシュした場合は自動的に再起動するように設定する必要がある。

3.3 ネットワークとストレージ

* Docker Network: コンテナ間の接続を確立する専用のネットワークを設定する。network: host や --link の使用は禁止されている。
* Docker Volumes:
  * 「WordPressのデータベース」と「WordPressのWebサイトファイル」用に2つの名前付きボリューム（Named Volumes）を使用する。
  * バインドマウント（Bind mounts）は禁止されている。
  * データはホストマシンの /home/login/data（loginは各自のユーザー名）に保存される必要がある。


--------------------------------------------------------------------------------


4. 技術的制約とセキュリティ

強固なシステム管理を実践するため、以下の制約が課されている。

* アンチパターンの禁止: コンテナをVMのように扱う「ハック的なパッチ」（tail -f, bash, sleep infinity, while true 等）をエントリポイントやスクリプトで使用してはならない。PID 1に関するベストプラクティスを遵守すること。
* 機密情報の管理:
  * Dockerfile 内にパスワードを記述することは厳禁である。
  * 環境変数の使用は必須であり、.env ファイルに保存すること。
  * 機密情報の保存には Docker secrets の使用が強く推奨される。Gitリポジトリに機密情報が公開された場合、即座に不合格となる。
* WordPressの設定:
  * 管理者（Administrator）を含む2人のユーザーを作成すること。
  * 管理者のユーザー名に "admin" や "administrator"（大文字小文字問わず）を含めてはならない。
* ドメイン設定: ローカルIPアドレスを指すドメイン名 login.42.fr（loginは各自のユーザー名）を設定すること。


--------------------------------------------------------------------------------


5. ドキュメンテーション要件

プロジェクトの妥当性を検証するため、ルートディレクトリに以下のMarkdownファイルを配置する必要がある。

* README.md (英語必須):
  * プロジェクトの概要、インストール・実行手順、使用したリソースを記載。
  * AIの使用箇所とその説明を含める。
  * 「VM vs Docker」「Secrets vs 環境変数」「Docker Network vs Host Network」「Docker Volume vs Bind Mounts」の比較解説を含めること。
* USER_DOC.md: エンドユーザーや管理者向け。サービスの概要、開始・停止方法、サイトおよび管理パネルへのアクセス方法、資格情報の管理方法を記載。
* DEV_DOC.md: 開発者向け。環境構築手順、MakefileとDocker Composeを用いたビルド・起動方法、コンテナ管理コマンド、データ永続性の詳細を記載。


--------------------------------------------------------------------------------


6. ボーナス課題と評価プロセス

6.1 ボーナス項目

必須課題が完全に（不具合なく）完了している場合に限り、以下の追加サービスが評価対象となる。各サービスは個別のコンテナとボリューム（必要に応じて）で動作させる必要がある。

* WordPress用の Redis キャッシュ
* WordPressボリュームを参照する FTP サーバー
* PHP 以外で記述された静的ウェブサイト
* Adminer
* その他、有用と判断される任意のサービス（評価時にその選択理由を正当化する必要がある）

6.2 提出とピア評価

* 提出はGitリポジトリを通じて行う。
* 評価（Defense）の際、理解度を確認するためにコードの軽微な修正やスクリプトの更新、新しい情報の保存に向けたデータ構造の調整などが要求される場合がある。これに数分以内で対応できる準備をしておく必要がある。
